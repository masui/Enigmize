<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="icon" type="image/png" href="/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/enigmize.css" />
    <title>Enigmize</title>
  </head>
  
  <body>
    
    <h1><%= @email %> との秘密通信</h1>
    
    <ul>
      <li><%= @email %>の公開鍵</li>
      <pre id="publickey">
      </pre>
      <!-- <li><a href="<%= @email %>.ink"><%= @email %>公開鍵ダウンロード </li> -->
      <li>
	このページにファイルをDrag&amp;Dropすると
	上の<b>公開鍵</b>で暗号化され、
	「<b><code>ファイル名.enigma</code></b>」という謎のファイルが生成されます
      </li>
      <li>
	<b><code>.enigma</code></b>ファイルは暗号化されたデータを含むZipファイルです
      </li>
      <li>
	<b><code>.enigma</code></b>ファイルは <%= @email %> が持ってる <b>秘密鍵</b> で復号できます
      </li>
      <li>
	公開鍵と秘密鍵のペアは
	<input type='button' id='generatekeys' value='鍵生成ボタン' /> で生成できます
      </li>
      <li>
	<a href="<%= @email %>.ink">公開鍵</a> は <a href="/">Enigmize.com</a> に登録され、
	<b>秘密鍵</b> はローカルマシンにセーブします
      </li>
      <li>
	(現在認証が無いので誰でも生成できてしまいますが、メールで認証できるようにする予定です)
      </li>
      <li>
	<b><code>.enigma</code></b> ファイルをDrag&amp;Dropして秘密鍵を指定すると
	もとのファイルを得ることができます
      </li>
    </ul>

    <script type="text/javascript">
      const email = "<%= @name %>@<%= @domain %>";
    </script>
    <script type="text/javascript" src="/javascripts/bundle.js"></script>
    
  </body>
</html>

